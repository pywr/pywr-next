[workspace]
resolver = "2"
members = [
    "ipm-common",
    "ipm-ocl",
    "ipm-simd",
    "clp-sys",
    "pywr-core",
    "pywr-schema",
    "pywr-cli",
    "pywr-python",
]
exclude = [
    "tests/models/simple-wasm/simple-wasm-parameter"
]
# IPM packages are not default because they require nightly (portable_simd).
default-members = [
    "clp-sys",
    "pywr-core",
    "pywr-schema",
    "pywr-cli",
    "pywr-python",
]


[profile.release]
opt-level = 3 # fast and small wasm
# lto = true
# strip = true
# Turn this on for profiling
# debug = true


[workspace.dependencies]
serde = { version = "1", features = ["derive"] }
serde_json = "1.0"
thiserror = "1.0.25"
time = { version = "0.3", features = ["serde", "serde-well-known", "serde-human-readable", "macros"] }
num = "0.4.0"
ndarray = "0.15.3"
polars = { version = "0.36.2", features = ["lazy", "rows", "ndarray"] }
pyo3-polars = "0.10.0"
pyo3 = { version = "0.20.0" }
tracing = "0.1"
csv = "1.1"
hdf5 = { version="0.8.1" }
hdf5-sys = { version="0.8.1", features=["static"] }
pywr-v1-schema = { git = "https://github.com/pywr/pywr-schema/", tag="v0.9.0", package = "pywr-schema" }
